<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Signal 001</title>
  <style>
    /* Reset & βασικό styling */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      width: 100%;
      height: 100%;
      background-color: #000;         /* Μαύρο φόντο */
      overflow: hidden;
      font-family: 'Courier New', Courier, monospace;
    }

    /* Overlay για να πατήσει ο χρήστης (πλήρης οθόνη) */
    #start-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #ff3366;
      font-size: 24px;
      cursor: pointer;
      z-index: 1000;
      user-select: none;
    }

    /* “signal_001” πάνω αριστερά - κρυφό αρχικά, μεγάλο μέγεθος, πιο αργή μετάβαση */
    #signal-tag {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #ff3366;                    /* Ροζ-κόκκινο χρώμα */
      font-size: 24px;                   /* Μεγαλύτερο μέγεθος */
      display: none;                     /* Κρυφό μέχρι να πατήσει ο χρήστης */
      opacity: 1;
      transition: opacity 0.4s ease-in-out; /* Πιο αργή fade (0.4s) */
    }

    /* Container για το typing effect - κρυφό αρχικά */
    #typing-container {
      display: none;
      justify-content: center;
      align-items: center;
      height: 100%;
      text-align: center;
    }
    #typing-text {
      white-space: pre-wrap;
      color: #ff3366;
      font-size: 28px;
      line-height: 1.3;
    }

    /* Overlay για flash εφέ (λευκή οθόνη) - κρυφό αρχικά */
    #flash-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #fff;
      opacity: 0;
      pointer-events: none;
      z-index: 900;
    }

    /* “Flash” animation: εμφανίζει στιγμιαία λευκό κάλυμμα */
    @keyframes flash {
      0%   { opacity: 0; }
      50%  { opacity: 1; }
      100% { opacity: 0; }
    }
    .flash {
      animation: flash 0.6s ease-in-out;   /* 0.6s flash */
    }

    /* Τελικό μήνυμα: λίγο θολό (blur 2px), κρυφό αρχικά */
    #final-message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-size: 24px;
      filter: blur(2px);                   /* Μικρή θολούρα */
      display: none;                       /* Κρυφό μέχρι τη στιγμή του */
      white-space: nowrap;
      z-index: 800;
    }
  </style>
</head>
<body>
  <!-- Overlay για να ξεκινήσει η ακολουθία με κλικ -->
  <div id="start-overlay">ΞΥΠΝΑ.</div>

  <!-- Πάνω αριστερά: signal_001 (αρχικά κρυφό) -->
  <div id="signal-tag">signal_001</div>

  <!-- Κεντρικό container για typing effect (αρχικά κρυφό) -->
  <div id="typing-container">
    <div id="typing-text"></div>
  </div>

  <!-- Overlay για το flash effect (αρχικά κρυφό) -->
  <div id="flash-overlay"></div>

  <!-- Τελικό λίγο θολό μήνυμα (αρχικά κρυφό) -->
  <div id="final-message">Signal_001&nbsp;→&nbsp;d3livered</div>

  <!-- Ενσωματωμένοι ήχοι -->
  <!-- 1) Πιο δυνατό beep για το flash -->
  <audio id="beep-audio"
         src="data:audio/wav;base64,UklGRpgiAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YXQiAAAAAAIEAAj3C+EPuxOCFz+v+7HxN+/////v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/" 
         preload="auto"></audio>
  <!-- 2) placeholder για “signal blinking” ήχο (glitch) -->
  <audio id="signal-audio" src="../glitch.wav" preload="auto" loop></audio>

  <script>
    let audioContextUnlocked = false;

    // -------- Συνάρτηση για να ξεκλειδώσουμε το AudioContext --------
    function unlockAudioContext() {
      if (audioContextUnlocked) return;
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = ctx.createOscillator();
      const gainNode = ctx.createGain();
      osc.connect(gainNode);
      gainNode.connect(ctx.destination);
      gainNode.gain.value = 0; // σιωπηλό
      osc.start();
      osc.stop(ctx.currentTime + 0.02);
      audioContextUnlocked = true;
    }

    // -------- ΠΛΗΚΤΡΟΛΟΓΗΣΗ --------
    const lines = [
      "ΞΥΠΝΑ.",
      "ΟΧΙ ΜΕ ΚΑΦΕ.",
      "ΜΕ ΔΕΔΟΜΕΝΑ."
    ];
    const typingEl = document.getElementById("typing-text");
    const typingContainer = document.getElementById("typing-container");
    const typingSpeed = 100;               // ms ανά γράμμα
    let currentLine = 0;
    let currentChar = 0;

    function typeNextChar() {
      if (currentLine >= lines.length) {
        onTypingComplete();
        return;
      }
      const lineText = lines[currentLine];
      if (currentChar < lineText.length) {
        typingEl.textContent += lineText.charAt(currentChar);
        currentChar++;
        setTimeout(typeNextChar, typingSpeed);
      } else {
        typingEl.textContent += "\n";
        currentLine++;
        currentChar = 0;
        setTimeout(typeNextChar, typingSpeed);
      }
    }

    function onTypingComplete() {
      setTimeout(() => {
        // Πριν το flash ξεκινήσει, σταματάμε τον glitch ήχο
        const signalAudio = document.getElementById("signal-audio");
        signalAudio.pause();
        signalAudio.currentTime = 0;

        // 1) Παίζουμε beep για το flash (όχι fade, max volume)
        const beepAudio = document.getElementById("beep-audio");
        beepAudio.volume = 1; // μέγιστη ένταση
        beepAudio.currentTime = 0;
        beepAudio.play().catch(() => {});

        // 2) Flash εφέ
        document.getElementById("flash-overlay").classList.add("flash");

        setTimeout(() => {
          document.getElementById("flash-overlay").classList.remove("flash");
          document.getElementById("signal-tag").style.display = "none";
          typingContainer.style.display = "none";
          document.getElementById("final-message").style.display = "block";
        }, 600);
      }, 2000);
    }

    // -------- Όταν ο χρήστης πατήσει στο overlay --------
    document.getElementById("start-overlay").addEventListener("click", () => {
      // 1) Αφαιρούμε το overlay
      document.getElementById("start-overlay").style.display = "none";
      // 2) Ξεκλειδώνουμε το AudioContext
      unlockAudioContext();
      // 3) Ξεκινάμε την ακολουθία
      startSequence();
    });

    function startSequence() {
      const signalTag = document.getElementById("signal-tag");
      const signalAudio = document.getElementById("signal-audio");

      // 1) Εμφανίζουμε signal-tag
      signalTag.style.display = "block";
      signalTag.style.opacity = "1";

      // 2) Παίζουμε τον glitch ήχο ασταμάτητα μέχρι το flash
      signalAudio.currentTime = 0;
      signalAudio.play().catch(() => {});

      // 3) Κάνουμε fade in/out κάθε 400ms για 3s
      let visible = true;
      const blinkInterval = setInterval(() => {
        visible = !visible;
        signalTag.style.opacity = visible ? "1" : "0";
      }, 400);

      setTimeout(() => {
        clearInterval(blinkInterval);
        signalTag.style.opacity = "1";
        typingContainer.style.display = "flex";
        typeNextChar();
      }, 3000);
    }
  </script>
</body>
</html>
